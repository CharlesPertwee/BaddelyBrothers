<odoo>
  <template id="job_ticket">
    <t t-call="web.html_container">
      <t t-foreach="docs" t-as="o">
        <t t-call="web.basic_layout">
          <div class="page" style="padding-top=50em; padding-left=20em; padding-right=30em;" t-if="o.Estimate">
            <div class="table-responsive">
              <table style="border: 1px black solid;" class="table">
                <tbody>
                  <tr>
                    <td colspan="2" style="width:33%; border: 1px black solid;">
                      <center>
                        <b style="font-size:22px;"><span t-field="o.name"/></b>
                      </center><br/>
                      <center>
                        <img alt="Barcode" t-if="len(o.name) == 13" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('EAN13', o.name, 600, 150)" style="width:100%;height:30%;"/>
                        <img alt="Barcode" t-elif="len(o.name) == 8" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('EAN8', o.name, 600, 150)" style="width:100%;height:30%;"/>
                        <img alt="Barcode" t-else="" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', o.name, 600, 150)" style="width:100%;height:30%;"/>
                      </center>
                    </td>
                    <td style="width:24%; border: 1px black solid; line-height: 30px;">
                      <span class="pull-left">Date: <b><span t-field="o.create_date" t-options="{'widget': 'date'}" /></b></span><br/>
                      <span class="pull-left">Est No: <b><t t-esc="o.Estimate.estimate_number" /></b></span><br/>
                      <span class="pull-left">Prev Job Ref: <b><t t-esc="o.previousJobRef" /></b></span>
                    </td>
                    <td style="width:28%; border: 1px black solid;">
                      <span class="pull-right">Date Required: <b><span t-field="o.Estimate.target_dispatch_date" t-field-options="{'format': 'MM/dd/yyyy'}" /></b></span><br/><br/><br/>
                      <span class="pull-right">Office Contact: <b><span t-field="o.Estimate.estimator.name" /></b></span>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="3" style="width:50%; border: 1px black solid; line-height: 15px;">
                      <span class="pull-left"><b>Customer: <span t-field="o.Estimate.partner_id.name"/></b></span>
                    </td>
                    <td colspan="3" style="width:50%; border: 1px black solid; line-height: 15px;">
                      <span class="pull-left">Customer O/No: <b><span t-field="o.customerRef"/></b></span>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="6" style="width:50%; border: 1px black solid; line-height: 15px;">
                      <span>Job Title:  <b><span t-field="o.Estimate.title" /></b></span> <span class="pull-right">Project: <b><span class="text-right" t-field="o.Estimate.project.name"></span></b></span>
                    </td>
                  </tr>
                  <tr>
                   <td colspan="6" style="padding:0px;border:0px">
                      <table class="table" style="margin:0px;">
                       <tr>
                        <td style="border-right: 0px; width:23% line-height: 15px;">
                         <span class="pull-left">Job Type: &#160;&#160;&#160;&#160; <b><span t-field="o.JobType"/></b></span>
                       </td>
                       <td style="border-right: 1px black solid; width:54% line-height: 15px;">
                         <span class="pull-left">Spec: &#160;&#160;&#160; <b><span t-field="o.SpecifcationType"/></b></span><span class="pull-right">Quantity:  &#160;&#160;<b><span t-esc="o.Estimate['quantity_'+o.Estimate.selectedQuantity] + o.Estimate.selectedRunOn"/></b></span>
                       </td>
                       <td style="border-right: 1px black solid; width:23%; line-height: 15px;">
                        <span class="pull-right">Fin Size:&#160;&#160;&#160;<b>(<span t-field="o.Estimate.finished_height" /> x <span t-field="o.Estimate.finished_width" />)</b></span>
                       </td>
                      </tr>
                      <tr>
                       <td colspan="6" style="border-top: 1px black solid; border-right: 1px black solid; line-height: 18px;">
                        <span>Job Description</span><span class="pull-right">Printed <b><t t-esc="o.Estimate.number_up"/></b> up</span><br/>
			<b><t t-raw="o.Estimate.GenerateEnvelopeDetails(o.Estimate).replace('\n','&lt;br/&gt;')"/></b><br/>
			<t t-foreach="o.Estimate.estimate_line" t-as="line">
                          <t t-if="line.JobTicketText and (not line.isExtra)">
                            <b><span t-field="line.JobTicketText" /></b><br/>
                          </t>
                        </t>
                      </td>
                      </tr>
                  </table>
                </td>
              </tr>
              <tr>
                <td colspan="6" style="border-top: 1px black solid; border-right: 1px black solid;line-height: 18px;">
                  <span class="pull-left">Special Instructions: <b><span t-field="o.Estimate.SpecialInstuction" /></b></span><br/><br/>
                </td>
              </tr>
              <tr>
               <td colspan="6" style="padding:0px;border:0px">
                 <table class="table" style="margin:0px;">
                   <tr>
                     <td style="border-top: 1px black solid; width:77%; line-height: 18px;">
                       <span class="pull-left"><u>Stock Description / Cutting Instructions:</u></span>
                     </td>
                     <td style="border-top: 1px black solid; border-right: 1px black solid; width:23%; line-height: 18px;">
                      <span class="pull-left"> Cutter No: <b><span t-esc="o.Estimate.knife_number if o.Estimate.knife_number else ''" /></b></span>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
            <tr>
             <td colspan="6" style="padding:0px;border:0px">
               <table class="table" style="margin:0px;">

                <!-- material -->
                <t t-foreach="o.Estimate.estimate_line" t-as="line">
                  <t t-if="line.option_type and line.option_type == 'material' and line.documentCatergory != 'Despatch' and (not line.isExtra) and (line.param_number_out != 0)">
                    <tr>
                      <td style="border-top: 0px; width:35%; line-height: 18px;">
                       <b><span t-esc="line.GenerateMaterialDetails(line)" /></b>
                     </td>
                     <td style="border-top: 0px; width:15%; line-height: 18px;">
                       <b><span t-esc="'%0.2f'%((line['total_price_'+o.Estimate.selectedQuantity]  * o.Estimate.SelectedQtyRatio) + (line['total_price_run_on'] * o.Estimate.selectedRatio))"/></b>
                     </td>
                     <td style="border-top: 0px; width:15%; line-height: 18px;">
                      <b><span>Cut <t t-esc="line.param_number_out"/> out </span></b>
                    </td>
                    <td style="border-top: 0px; width:40%; line-height: 18px; border-right: 1px solid black;">
                      <b><span>W/Size:</span>&#160;&#160;&#160;&#160; <t t-esc="o.Estimate.working_width"/> x <t t-esc="o.Estimate.working_height"/> &#160;&#160;&#160;&#160;<span>mm</span></b>
                    </td>
                  </tr>
                </t>
              </t>
              <!-- end -->

            </table>
          </td>
        </tr>
</tbody>
</table>
</div>
<div style="margin-top:-18px;">
  <tr>
    <td colspan="6" style="padding:0px;border:0px">
      <table class="table" style="margin:0px;">
        <tr>
          <td style="border-left: 1px black solid;border-top: 1px black solid; border-right: 1px black dotted; width:57%; padding: 0 0.75rem;">
            <span>Process</span><br/>
          </td>
          <td style="border-top: 1px black solid; border-right: 1px black dotted; width:15%; padding: 0;">
           <center><span>Qty Rec'd</span></center>
         </td>
         <td style="border-top: 1px black solid; border-right: 1px black dotted; width:14%; padding: 0;">
           <center><span>Qty Finish</span></center>
         </td>
         <td style="border-top: 1px black solid; border-right: 1px black solid; width:14%;padding: 0;">
           <center><span>Time</span></center>
         </td>
        </tr>
        <t t-foreach="o.Estimate.estimate_line" t-as="line">
          <t t-if="line.option_type and line.option_type == 'process' and (not line.isExtra)">
            <tr>
              <td style="border-left: 1px black solid;border-top: 1px black dotted; border-right: 1px black dotted; width:57%; padding: 0 0.75rem;">
                <span><b><t t-esc="line.lineName"/></b></span><br/>
              </td>
              <td style="border-top: 1px black dotted; border-right: 1px black dotted; width:15%; padding: 0;">
                <center></center>
              </td>
              <td style="border-top: 1px black dotted; border-right: 1px black dotted; width:14%; padding: 0;">
               <center></center>
             </td>
             <td style="border-top: 1px black dotted; border-right: 1px black solid; width:14%; padding: 0;">
               <center><b><span t-esc="(line['quantity_required_'+o.Estimate.selectedQuantity] * o.Estimate.SelectedQtyRatio) + (line['quantity_required_run_on'] * o.Estimate.selectedRatio)" t-options="{'widget': 'float_time'}"/></b></center>
             </td>
           </tr>
         </t>
       </t>
      </table>
    </td>
  </tr>
  <tr>
    <td colspan="6" style="padding:0px;border:0px">
      <table class="table" style="margin:0px;">
        <tr>
          <td style="border-left: 1px black solid;border-top: 1px black solid; border-right: 1px black solid; width:20%; line-height: 18px; ">
            <center><span>No of File Copies Req'd: <b><span t-field="o.NoOfCopiesRequired" /></b></span></center>
          </td>
          <td style="border-top: 1px black solid; border-right: 1px black solid; width:20%; line-height: 18px;">
            <center><span>Overs Req'd(Y/N): <b><t t-esc="'Y' if o.ChargeOvers else 'N'"/> <span t-field="o.OversRequired" /></b></span></center>
         </td>
         <td style="border-top: 1px black solid; border-right: 1px black solid; width:17%; line-height: 18px;">
            <center><span>Return Die to: <b><span t-field="o.DieType"/></b></span></center>
         </td>
         <td style="border-top: 1px black solid; border-right: 1px black solid; width:20%; line-height: 18px;">
            <center><span>Despatch Method: <b><span t-field="o.Estimate.DeliveryMethod.name" /></b></span></center>
         </td>
         <td style="border-top: 1px black solid; border-right: 1px black solid; width:23%;">
            <span class="pull-left">Date: <b></b></span>
         </td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
   <td colspan="6" style="padding:0px;border:0px">
     <table class="table">
       <tr>
         <td style="border-left: 1px black solid;border-top: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; line-height: 18px;">
		 <span class="pull-left">Delivery Address: <b><span t-field="o.Estimate.Delivery.street" />
           <span t-field="o.Estimate.Delivery.street2" />
           <span t-field="o.Estimate.Delivery.city" />
	   <span t-field="o.Estimate.Delivery.zip" /></b></span><br/>
         </td>
       </tr>
     </table>
   </td>
 </tr>
</div>
<div>
	<span class="pull-left">Feedback: </span>
</div>
<div class="footer" style="opacity:0.6;">
    <span class="pull-right"><h4><span t-field="o.name"/></h4></span>
</div>

</div>
</t>
</t>
</t>
</template>

</odoo>
